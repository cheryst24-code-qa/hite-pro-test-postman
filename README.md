# Hite Pro Gateway API ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–ù–∞–±–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö API-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è —à–ª—é–∑–∞ **Hite Pro** —á–µ—Ä–µ–∑ –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å `connect-profi.ru`.  
–¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –≤ **Postman**, –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **Newman** –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ CI/CD (–Ω–∞–ø—Ä–∏–º–µ—Ä, GitHub Actions).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
hite-pro-test-postman/  
‚îú‚îÄ‚îÄ hite-pro-collection.json # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è Postman  
‚îú‚îÄ‚îÄ environment.json # –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—Å—è!)  
‚îú‚îÄ‚îÄ environment.template.json # –®–∞–±–ª–æ–Ω –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)  
‚îú‚îÄ‚îÄ .gitignore # –ò—Å–∫–ª—é—á–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ Git  
‚îî‚îÄ‚îÄ README.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª  

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [Node.js](https://nodejs.org/) (v18+)
- [Newman](https://www.npmjs.com/package/newman) (CLI –¥–ª—è Postman)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Newman:
```bash
npm install -g newman

```
‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ  
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª environment.json –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞:  
cp environment.template.json environment.json

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ environment.json, —É–∫–∞–∑–∞–≤:
- baseUrl: https://<–≤–Ω–µ—à–Ω–∏–π_–∫–ª—é—á>.connect-profi.ru/rest
- username / password: —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç —à–ª—é–∑–∞

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:  
newman run hite-pro-collection.json -e environment.json

üí° –¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ —Ç–∏–ø–∞–º (dimmer, motion, temperature –∏ –¥—Ä.)  
 –∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç —à–∞–≥–∏, –µ—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ environment.json –≤ Git!
  –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á, –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å).
- –§–∞–π–ª .gitignore —É–∂–µ –∏—Å–∫–ª—é—á–∞–µ—Ç environment.json.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ environment.template.json –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º.

## üß™ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–ö–æ–ª–ª–µ–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:
| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | –¢–∏–ø—ã –≤ API | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|-----------|
| `–í—ã–∫–ª—é—á–∞—Ç–µ–ª—å` | `switch` | `–ß—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è` |
| `–î–∏–º–º–µ—Ä` | `dimmer` | `–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (boolean)` |
| `–î–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è` | `motion` | `–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (boolean)` |
| `–î–∞—Ç—á–∏–∫ –æ—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç–∏` | `illumination` | `(—Ä–µ–∑–µ—Ä–≤)` |
| `–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞` | `temperature` | `–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (-40..+50¬∞C)` |
| `–í–ª–∞–∂–Ω–æ—Å—Ç—å` | `humidity` | `(—Ä–µ–∑–µ—Ä–≤)` |
| `RGBW-–ª–µ–Ω—Ç–∞` | `LED, LED3S/M, RGBW` | `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–º (#00ff00)` |

–ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç, –ø–æ—ç—Ç–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç —Å –¥–∞–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º.

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD (GitHub Actions)
–ü—Ä–∏–º–µ—Ä .github/workflows/api-tests.yml:
```yaml

name: API Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install Newman
        run: npm install -g newman

      - name: Create environment.json from secrets
        run: |
          cat > environment.json <<EOF
          {
            "id": "ci-env",
            "name": "CI Environment",
            "values": [
              { "key": "baseUrl", "value": "https://${{ secrets.HITE_PRO_KEY }}.connect-profi.ru/rest", "enabled": true },
              { "key": "username", "value": "${{ secrets.HITE_PRO_USER }}", "enabled": true },
              { "key": "password", "value": "${{ secrets.HITE_PRO_PASS }}", "enabled": true }
            ]
          }
          EOF

      - name: Run API tests
        run: newman run hite-pro-collection.json -e environment.json
```
–ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Settings ‚Üí Secrets and variables ‚Üí Actions:

- HITE_PRO_KEY  
- HITE_PRO_USER  
- HITE_PRO_PASS 

## üõ† –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏
| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|-----|----------|-----------|
| `ENOTFOUND {{baseUrl}}` | `–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–ª–∏ –ø—Ä–æ–±–µ–ª—ã –≤ environment.json` | `–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á = baseUrl, –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤` |
| `504 Gateway Time-out` | `–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É` | `–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Hite Pro` |
| `pm.request.abort is not a function` | `–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –º–µ—Ç–æ–¥–∞ –≤ Newman` | `–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pm.execution.skipRequest() (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏)` |

## üì¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —à–ª—é–∑–∞ Hite Pro.  
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: github.com/cheryst24-code-qa/hite-pro-test-postman


